{% if pages > 1 %}
    <link rel="canonical" href="{{ url(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')) }}"/>
    {% set page =  app.request.query.int('page', 1) %}
    {% if page > 1 %}
        {% if page == 2 %}
            <link rel="prev"
                  href="{{ url(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')|merge(app.request.query.all|merge({'page': null}))) }}"/>

        {% else %}
            <link rel="prev"
                  href="{{ url(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')|merge(app.request.query.all|merge({'page': page - 1}))) }}"/>
        {% endif %}
    {% endif %}
    {% if page < pages %}
        <link rel="next"
              href="{{ url(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')|merge(app.request.query.all|merge({'page': page + 1}))) }}"/>
    {% endif %}
{% endif %}
